<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AALAM SOS PRO</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .sos-btn {
            width: 220px; height: 220px; background: radial-gradient(#ff0000, #800000);
            border-radius: 50%; font-size: 40px; font-weight: bold; border: 5px solid #333;
            color: white; box-shadow: 0 0 50px rgba(255,0,0,0.5); margin: 30px auto;
        }
        .profile-box { background: #1a1a1a; padding: 15px; border-radius: 10px; border: 1px solid #333; margin-top: 20px; }
        input { width: 80%; padding: 10px; margin: 5px; background: #222; border: 1px solid #444; color: #fff; }
        button.save { background: #4CAF50; color: white; border: none; padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>üõ°Ô∏è AALAM SECURITY</h2>

    <div class="profile-box">
        <input type="text" id="user-name" placeholder="Full Name (e.g. Almazbek)">
        <input type="text" id="user-address" placeholder="Home Address">
        <button class="save" onclick="saveProfile()">SAVE SETTINGS</button>
    </div>

    <button class="sos-btn" id="sos-trigger">SOS</button>
    <p id="status">HOLD 3 SECONDS TO SEND</p>

    <script>
        const TOKEN = '8214991980:AAF7B8fUkyOULoXf0ySrwX6zbPQBz3qpJvo';
        const CHAT = '909942121';
        let timer;

        function saveProfile() {
            localStorage.setItem('user_name', document.getElementById('user-name').value);
            localStorage.setItem('user_addr', document.getElementById('user-address').value);
            alert("Settings Saved!");
        }

        // Fill inputs from storage on load
        document.getElementById('user-name').value = localStorage.getItem('user_name') || "";
        document.getElementById('user-address').value = localStorage.getItem('user_addr') || "";

        function sendSOS() {
            const name = localStorage.getItem('user_name') || "Unknown User";
            const addr = localStorage.getItem('user_addr') || "No Address Saved";
            
            document.getElementById('status').innerText = "üõ∞Ô∏è PINPOINTING...";

            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lng = pos.coords.longitude;

                // HIGHLIGHT: Step 1 - Send the Precise Map Pin
                await fetch(`https://api.telegram.org/bot${TOKEN}/sendLocation?chat_id=${CHAT}&latitude=${lat}&longitude=${lng}`);

                // HIGHLIGHT: Step 2 - Send the Name and Address Card
                const detailMsg = `üö® *SOS ALERT* üö®\n\nüë§ *Sender:* ${name}\nüè† *Address:* ${addr}\nüÜî *ID:* ${Date.now()}`;
                
                await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT}&text=${encodeURIComponent(detailMsg)}&parse_mode=Markdown`);
                
                document.getElementById('status').innerText = "‚úÖ LOCATION & DATA SENT";
            }, (err) => alert(err.message), { enableHighAccuracy: true });
        }

        const btn = document.getElementById('sos-trigger');
        btn.onpointerdown = () => { timer = setTimeout(sendSOS, 3000); };
        window.onpointerup = () => { clearTimeout(timer); };
    </script>
</body>
</html>
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AALAM SOS SENDER</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; margin: 0; overflow: hidden; touch-action: manipulation; }
        .header { background: #1a1a1a; padding: 30px 20px; border-bottom: 2px solid #333; }
        .sos-btn {
            width: 220px; height: 220px; background: radial-gradient(#ff0000, #800000);
            border-radius: 50%; font-size: 40px; font-weight: bold; border: 5px solid #333;
            color: white; box-shadow: 0 0 50px rgba(255, 0, 0, 0.5); margin-top: 50px;
        }
        #status { color: #ff3e3e; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="header"><h2>üõ°Ô∏è AALAM SECURITY</h2></div>
    <button class="sos-btn" id="sos-trigger">SOS</button>
    <p id="status">HOLD BUTTON TO SEND</p>

    <script>
        const TOKEN = '8214991980:AAF7B8fUkyOULoXf0ySrwX6zbPQBz3qpJvo';
        const CHAT = '909942121';
        let timer;
        const btn = document.getElementById('sos-trigger');

        function sendSOS() {
            document.getElementById('status').innerText = "üì° LOCATING...";
            navigator.geolocation.getCurrentPosition((pos) => {
                const lat = pos.coords.latitude;
                const lng = pos.coords.longitude;
                const time = new Date().getTime(); // Unique ID
                
                // HIGHLIGHT: Formatting message for the Dashboard
                const message = `üö® SOS_ALERT üö®\nCoords: ${lat},${lng}\nID: ${time}`;
                fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT}&text=${encodeURIComponent(message)}`)
                .then(r => r.json())
                .then(data => {
                    if(data.ok) {
                        document.getElementById('status').innerText = "‚úÖ SENT TO COMMAND CENTER";
                    } else {
                        alert("Bot Error: " + data.description);
                    }
                });
            }, (err) => alert("GPS Error: " + err.message), { enableHighAccuracy: true });
        }

        btn.addEventListener('pointerdown', () => { 
            btn.style.transform = "scale(0.95)";
            timer = setTimeout(sendSOS, 2000); // 2 Seconds hold
        });
        window.addEventListener('pointerup', () => { 
            btn.style.transform = "scale(1)";
            clearTimeout(timer); 
        });
    </script>
</body>
</html>


 -->

